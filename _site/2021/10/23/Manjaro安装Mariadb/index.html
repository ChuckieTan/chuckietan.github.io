<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>Manjaro安装Mariadb &mdash; 天一阁</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mzlogin/rouge-themes@master/dist/github.css"><link rel="canonical" href="http://localhost:4000/2021/10/23/Manjaro%E5%AE%89%E8%A3%85Mariadb/"><link rel="alternate" type="application/atom+xml" title="天一阁" href="http://localhost:4000/feed.xml"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/favicon.ico"><meta property="og:title" content="Manjaro安装Mariadb"><meta name="keywords" content="SQL, MySQL, Mariadb, Manjaro, Arch Linux"><meta name="og:keywords" content="SQL, MySQL, Mariadb, Manjaro, Arch Linux"><meta name="description" content="Mariadb是MySQL的一个复刻。由于MySQL被Oracle公司收购，MySQL的一些原始开发者担心MySQL会有开源方面的某些隐患，故领导开发了Mariadb。"><meta name="og:description" content="Mariadb是MySQL的一个复刻。由于MySQL被Oracle公司收购，MySQL的一些原始开发者担心MySQL会有开源方面的某些隐患，故领导开发了Mariadb。"><meta property="og:url" content="http://localhost:4000/2021/10/23/Manjaro%E5%AE%89%E8%A3%85Mariadb/"><meta property="og:site_name" content="天一阁"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2021-10-23"> <script src="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="http://localhost:4000/" title="天一阁"><span class="octicon octicon-mark-github"></span> 天一阁</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="http://localhost:4000/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="http://localhost:4000/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="http://localhost:4000/links/" class=" site-header-nav-item" target="" title="链接">链接</a> <a href="http://localhost:4000/about/" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="Manjaro安装Mariad"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">Manjaro安装Mariadb</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2021/10/23 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="http://localhost:4000/categories/#数据库" title="数据库">数据库</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 2632 字，约 8 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><p>Mariadb是MySQL的一个复刻。由于MySQL被Oracle公司收购，MySQL的一些原始开发者担心MySQL会有开源方面的某些隐患，故领导开发了Mariadb。</p><p>如今，Mariadb已经作为许多Linux发行版的默认MySQL实现，在Arch Linux中，MySQL也被从官方软件仓库移入AUR中。</p><p>在Arch Linux系的Linux上安装软件是一个很方便的事，安装Mariadb也是一样，因为Arch Linux系的软件仓库是所有Linux发行版中最为庞大的，而且还有由社区进行维护的非官方软件仓库AUR，所以安装大部分软件都只是几条命令的事。</p><h2 id="安装mariadb">安装Mariadb</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yay -S mariadb
# 从官方软件仓库中安装Mariadb
sudo mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql
# 在启动mariadb.service之前需要运行此条命令指定相关目录
sudo systemctl enable mariadb
# 设置开机自启动
sudo systemctl start mariadb
# 启动mariadb服务
</code></pre></div></div><p>这样，Mariadb已经安装完毕。但之后还得进行一些安全性的配置。</p><h2 id="安全性的配置">安全性的配置</h2><p>运行<code class="language-plaintext highlighter-rouge">mysql_secure_installation</code>命令来进行安全性的配置。</p><p><code class="language-plaintext highlighter-rouge">mysql_secure_installation</code>会执行下面几个设置：</p><ul><li>给root用户设置密码</li><li>移除匿名用户</li><li>禁止root远程登录</li><li>移除测试数据库</li><li>重新加载特权表使修改生效</li></ul><p>这些安全配置非常重要，在生产环境中安装完MySQL或者Mariadb一定要执行一遍<code class="language-plaintext highlighter-rouge">mysql_secure_installation</code>来保证安全。具体操作如下：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>➜  ~ sudo mysql_secure_installation

NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we'll need the current
password for the root user. If you've just installed MariaDB, and
havent set the root password yet, you should just press enter here.

Enter current password for root (enter for none): # 设置root密码，初次运行直接回车
OK, successfully used password, moving on...

Setting the root password or using the unix_socket ensures that nobody
can log into the MariaDB root user without the proper authorisation.

You already have your root account protected, so you can safely answer 'n'.

Switch to unix_socket authentication [Y/n] 
Enabled successfully!
Reloading privilege tables..
 ... Success!


You already have your root account protected, so you can safely answer 'n'.

Change the root password? [Y/n] # 设置root密码
New password: 
Re-enter new password: 
Password updated successfully!
Reloading privilege tables..
 ... Success!


By default, a MariaDB installation has an anonymous user, allowing anyone
to log into MariaDB without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] # 移除匿名用户，建议移除
 ... Success!

Normally, root should only be allowed to connect from 'localhost'.  This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n] # 禁止root远程登录
 ... Success!

By default, MariaDB comes with a database named 'test' that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n] # 移除测试数据库
 - Dropping test database...
 ... Success!
 - Removing privileges on test database...
 ... Success!

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] #重新加载特权表
 ... Success!

Cleaning up...

All done!  If you've completed all of the above steps, your MariaDB
installation should now be secure.

Thanks for using MariaDB!
</code></pre></div></div><p>至此，Mariadb就安装完成了。</p><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="http://localhost:4000" target="_blank">Chuckie Tan</a></li><li>本文链接：<a href="http://localhost:4000/2021/10/23/Manjaro%E5%AE%89%E8%A3%85Mariadb/" target="_blank">http://localhost:4000/2021/10/23/Manjaro%E5%AE%89%E8%A3%85Mariadb/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/vendor/gitalk/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/2021/10/23/Manjaro%E5%AE%89%E8%A3%85Mariadb/', clientID: '9192d8de1e10b9e7a860', clientSecret: 'cc09adadb74c6993609715bb09e404aa30c72a1a', repo: 'blog-comments', owner: 'chuckietan', admin: ['chuckietan'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'http://localhost:4000/assets/search_data.json?v=1635004054', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2015 <span title="Chuckie Tan">Chuckie Tan</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/chuckietan/chuckietan.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="http://localhost:4000/" title="首页" target="">首页</a></li><li> <a href="http://localhost:4000/categories/" title="分类" target="">分类</a></li><li> <a href="http://localhost:4000/links/" title="链接" target="">链接</a></li><li> <a href="http://localhost:4000/about/" title="关于" target="">关于</a></li><li><a href="http://localhost:4000/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul><script async src="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/vendor/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量<span id="busuanzi_value_site_pv"></span>次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span> <span id="busuanzi_container_page_pv" style="display:none"> / 本页访问量<span id="busuanzi_value_page_pv"></span>次 / 统计始于2021-05-03 </span></div></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://cdn.jsdelivr.net/gh/chuckietan/chuckietan.github.io@master/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script><div style="display:none"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-80669434-1', 'auto'); ga('send', 'pageview'); </script></div></body></html>
